(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{666:function(t,o,v){"use strict";v.r(o);var _=v(6),e=Object(_.a)({},(function(){var t=this,o=t.$createElement,v=t._self._c||o;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("blockquote",[v("p",[t._v("双十一买了台服务，装的是 linux 系统，配置比较低，但是自己个人学习还是够用了。")])]),t._v(" "),v("h1",{attrs:{id:"准备-安装的服务"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#准备-安装的服务"}},[t._v("#")]),t._v(" 准备 安装的服务")]),t._v(" "),v("blockquote",[v("p",[t._v("node nginx mysql mongose")])]),t._v(" "),v("h3",{attrs:{id:"安装-node"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#安装-node"}},[t._v("#")]),t._v(" 安装 node")]),t._v(" "),v("blockquote",[v("p",[t._v("下载最新版本的 node")])]),t._v(" "),v("blockquote",[v("p",[t._v("==wget https://npm.taobao.org/mirrors/node/v9.4.0/node-v9.4.0-linux-x64.tar.gz==")])]),t._v(" "),v("blockquote",[v("p",[t._v("解压")])]),t._v(" "),v("blockquote",[v("p",[t._v("==tar -xvf node-v9.4.0-linux-x64.tar.gz==")])]),t._v(" "),v("blockquote",[v("p",[t._v("进入页面查看是否安装好了")])]),t._v(" "),v("blockquote",[v("p",[t._v("==cd node-v9.4.0-linux-x64/bin==")])]),t._v(" "),v("blockquote",[v("p",[t._v("==./node -v== //查看版本")])]),t._v(" "),v("blockquote",[v("p",[t._v("添加全局变量")])]),t._v(" "),v("blockquote",[v("p",[t._v("==vim /etc/profile==")])]),t._v(" "),v("blockquote",[v("p",[t._v("添加下面两条 (大家按实际的路径来走) 我的路径如下")])]),t._v(" "),v("blockquote",[v("p",[t._v("==export NODE_HOME=/usr/local/ly/node/node-v9.4.0-linux-x64==")])]),t._v(" "),v("blockquote",[v("p",[t._v("==export PATH=$NODE_HOME/bin:$PATH==")])]),t._v(" "),v("blockquote",[v("p",[t._v("编译")])]),t._v(" "),v("blockquote",[v("p",[t._v("==source /etc/profile==")])]),t._v(" "),v("blockquote",[v("p",[t._v("验证是否成功")])]),t._v(" "),v("blockquote",[v("p",[t._v("==node -v==")])]),t._v(" "),v("h3",{attrs:{id:"pm2-的安装"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#pm2-的安装"}},[t._v("#")]),t._v(" pm2 的安装")]),t._v(" "),v("blockquote",[v("p",[t._v("pm2 是一个带有负载均衡功能的 Node 应用的进程管理器.\n当你要把你的独立代码利用全部的服务器上的所有 CPU，并保证进程永远都活着，0 秒的重载， PM2 是完美的。它非常适合 IaaS 结构，但不要把它用于 PaaS 方案（随后将开发 Paas 的解决方案）")])]),t._v(" "),v("h3",{attrs:{id:"pm2-常用命令"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#pm2-常用命令"}},[t._v("#")]),t._v(" pm2 常用命令")]),t._v(" "),v("blockquote",[v("p",[t._v("$ npm install pm2 -g # 命令行安装 pm2")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 start app.js -i 4")])]),t._v(" "),v("ul",[v("li",[t._v("后台运行 pm2，启动 4 个 app.js")]),t._v(" "),v("li",[t._v("也可以把'max' 参数传递给 start")]),t._v(" "),v("li",[t._v("正确的进程数目依赖于 Cpu 的核心数目")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 start app.js --name my-api # 命名进程")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 list # 显示所有进程状态")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 monit # 监视所有进程")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 logs # 显示所有进程日志")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 stop all # 停止所有进程")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 restart all # 重启所有进程")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 reload all # 0 秒停机重载进程 (用于 NETWORKED 进程)")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 stop 0 # 停止指定的进程")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 restart 0 # 重启指定的进程")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 startup # 产生 init 脚本 保持进程活着")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 web # 运行健壮的 computer API endpoint")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 delete 0 # 杀死指定的进程")])]),t._v(" "),v("blockquote",[v("p",[t._v("$ pm2 delete all # 杀死全部进程")])]),t._v(" "),v("h2",{attrs:{id:"安装-pm2-并且调试下"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#安装-pm2-并且调试下"}},[t._v("#")]),t._v(" 安装 pm2 并且调试下")]),t._v(" "),v("blockquote",[v("p",[t._v("安装淘宝镜像")])]),t._v(" "),v("blockquote",[v("p",[t._v("==npm install -g cnpm --registry=https://registry.npm.taobao.org==")])]),t._v(" "),v("blockquote",[v("p",[t._v("全局安装 pm2")])]),t._v(" "),v("blockquote",[v("p",[t._v("==cnpm i -g pm2==")])]),t._v(" "),v("blockquote",[v("p",[t._v("是否安装成功")])]),t._v(" "),v("blockquote",[v("p",[t._v("pm2 -v")])]),t._v(" "),v("h2",{attrs:{id:"跑一个小型服务器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#跑一个小型服务器"}},[t._v("#")]),t._v(" 跑一个小型服务器")]),t._v(" "),v("blockquote",[v("p",[t._v("在 linux 下创建一个 demo 文件夹")])]),t._v(" "),v("blockquote",[v("p",[t._v("cd demo")])]),t._v(" "),v("blockquote",[v("p",[t._v("创建一个 app.js 文件")])]),t._v(" "),v("blockquote",[v("p",[t._v("内容如下")])]),t._v(" "),v("p",[v("img",{attrs:{src:"https://aymfx.github.io/img/a201801/b.png",alt:"app.js"}})]),t._v(" "),v("blockquote",[v("p",[t._v("pm2 start app.js")])]),t._v(" "),v("blockquote",[v("p",[t._v("浏览器访问如下")])]),t._v(" "),v("p",[v("img",{attrs:{src:"https://aymfx.github.io/img/a201801/b1.png",alt:"app.js"}})]),t._v(" "),v("h1",{attrs:{id:"下一接我们继续"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#下一接我们继续"}},[t._v("#")]),t._v(" 下一接我们继续")])])}),[],!1,null,null,null);o.default=e.exports}}]);